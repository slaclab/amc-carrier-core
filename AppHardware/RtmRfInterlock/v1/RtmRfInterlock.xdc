##############################################################################
## This file is part of 'LCLS2 Common Carrier Core'.
## It is subject to the license terms in the LICENSE.txt file found in the
## top-level directory of this distribution and at:
##    https://confluence.slac.stanford.edu/display/ppareg/LICENSE.html.
## No part of 'LCLS2 Common Carrier Core', including this file,
## may be copied, modified, propagated, or distributed except according to
## the terms contained in the LICENSE.txt file.
##############################################################################

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[9]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[9]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[14]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[14]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[13]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[13]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[19]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[19]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[18]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[18]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[3]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[3]}]

set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsP[8]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[8]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[34]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[34]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[35]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[35]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[36]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[36]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[37]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[37]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[38]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[38]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[40]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[40]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[41]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[41]}]

set_property -dict { IOSTANDARD LVDS_25 DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[39]}]
set_property -dict { IOSTANDARD LVDS_25 DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[39]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[42]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[42]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[50]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[50]}]

set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsP[51]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[51]}]

set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsP[53]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[53]}]

set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsP[52]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[52]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[45]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[45]}]

set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsP[46]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[46]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[44]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[44]}]

set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsP[43]}]
set_property -dict { IOSTANDARD LVDS_25 } [get_ports {rtmLsN[43]}]

set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsP[49]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[49]}]

set_property -dict { IOSTANDARD LVDS  } [get_ports {rtmLsP[2]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[2]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[48]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[48]}]

set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsP[5]}]
set_property -dict { IOSTANDARD LVDS DIFF_TERM_ADV TERM_100 } [get_ports {rtmLsN[5]}]

set_property -dict { IOSTANDARD LVDS  } [get_ports {rtmLsP[4]}]
set_property -dict { IOSTANDARD LVDS } [get_ports {rtmLsN[4]}]

# Clocks
create_clock -period 2.801 -name rtmAdcDataClk [get_ports {rtmLsP[3]}]
create_generated_clock -name rtmAdcDataClkDiv2 [get_pins -hier -filter {NAME =~ *U_RTM/U_CORE/U_Ad9229Core/U_BUFGCE_DIV/O}]
create_generated_clock -name recTimingClkDiv2  [get_pins -hier -filter {NAME =~ *U_RTM/U_CORE/U_ClockManager/MmcmGen.U_Mmcm/CLKOUT0}]

set_clock_groups -asynchronous -group [get_clocks {recTimingClk}] -group [get_clocks {rtmAdcDataClk}]
set_clock_groups -asynchronous -group [get_clocks {axilClk}] -group [get_clocks {rtmAdcDataClk}]
set_clock_groups -asynchronous -group [get_clocks {recTimingClkDiv2}] -group [get_clocks {rtmAdcDataClk}]
set_clock_groups -asynchronous -group [get_clocks {recTimingClkDiv2}] -group [get_clocks {rtmAdcDataClkDiv2}]
set_clock_groups -asynchronous -group [get_clocks {recTimingClk}] -group [get_clocks {rtmAdcDataClkDiv2}]
set_clock_groups -asynchronous -group [get_clocks {axilClk}] -group [get_clocks {rtmAdcDataClkDiv2}]

# Adding placement constraints
set_property LOC BITSLICE_CONTROL_X0Y1 [get_cells -hier -filter {NAME =~ *U_RTM/U_CORE/U_Ad9229Core/U_IDELAYCTRL}]
set_property LOC BITSLICE_RX_TX_X0Y114 [get_cells -hier -filter {NAME =~ *U_RTM/U_CORE/U_Ad9229Core/Ad9229Deserializer_INST/U_DELAY}]
set_property LOC BITSLICE_RX_TX_X0Y123 [get_cells -hier -filter {NAME =~ *U_RTM/U_CORE/U_Ad9229Core/GEN_DATA[0].Ad9229Deserializer_INST/U_DELAY}]
set_property LOC BITSLICE_RX_TX_X0Y143 [get_cells -hier -filter {NAME =~ *U_RTM/U_CORE/U_Ad9229Core/GEN_DATA[1].Ad9229Deserializer_INST/U_DELAY}]
set_property LOC BITSLICE_RX_TX_X0Y134 [get_cells -hier -filter {NAME =~ *U_RTM/U_CORE/U_Ad9229Core/GEN_DATA[2].Ad9229Deserializer_INST/U_DELAY}]
set_property LOC BITSLICE_RX_TX_X0Y112 [get_cells -hier -filter {NAME =~ *U_RTM/U_CORE/U_Ad9229Core/GEN_DATA[3].Ad9229Deserializer_INST/U_DELAY}]

